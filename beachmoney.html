<!DOCTYPE html>
<!--  BeachMoney v2 – zero-dependency, all-in-one file  -->
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Beach Money Tracker</title>
<style>
  :root { font-family: system-ui, sans-serif; line-height: 1.4; --accent:#0069ff; --danger:#e11d48; }
  body  { margin:0; padding:2rem; background:#f7f9fb; color:#222; }
  h1    { margin-top:0; }
  .card { max-width:640px; margin:auto; background:#fff; border-radius:10px; padding:1.75rem 2rem;
          box-shadow:0 3px 8px rgba(0,0,0,.08); }
  label { display:block; font-weight:600; margin:.75rem 0 .35rem; }
  input[type="text"],input[type="number"]{ width:100%; padding:.55rem .65rem; border:1px solid #ccc;
          border-radius:6px; font-size:1rem; }
  button{ margin-top:1rem; padding:.55rem 1.2rem; border:none; border-radius:6px; font-weight:600;
          cursor:pointer; font-size:.95rem; }
  .primary{ background:var(--accent); color:#fff; }
  .danger { background:var(--danger); color:#fff; }
  table { width:100%; border-collapse:collapse; margin-top:1.25rem; }
  th,td { padding:.5rem .4rem; border-bottom:1px solid #eee; }
  td.amount{ text-align:right; white-space:nowrap; }
  #summary{ margin-top:1.25rem; font-size:1.1rem; }
  @media (prefers-color-scheme: dark){
    body{background:#111;color:#ddd;} .card{background:#1b1b1b;} input,table,th,td{border-color:#333;}
  }
</style>
</head>
<body>
<div class="card">
  <h1>Beach Money Tracker</h1>

  <!-- Budget -->
  <label for="budget">Trip Budget ($)</label>
  <input type="number" id="budget" min="0" step="0.01" placeholder="e.g. 250">
  <button id="saveBudget" class="primary">Save / Update Budget</button>

  <hr style="margin:2rem 0">

  <!-- Expense -->
  <label for="item">What did you buy?</label>
  <input type="text" id="item" placeholder="Tacos, gas, sunscreen…">
  <label for="cost">Cost ($)</label>
  <input type="number" id="cost" min="0" step="0.01" placeholder="9.50">
  <button id="add" class="primary">Add Expense</button>

  <!-- List -->
  <table id="log" hidden>
    <thead><tr><th>Item</th><th class="amount">Amount</th><th></th></tr></thead>
    <tbody></tbody>
  </table>

  <!-- Summary -->
  <div id="summary"></div>

  <button id="resetAll" class="danger">Clear Everything</button>
</div>

<script>
/* ======= Storage helpers ======= */
const KEY_EXP = 'bm_expenses', KEY_BUD = 'bm_budget';
const getExp   = _=> JSON.parse(localStorage.getItem(KEY_EXP)||'[]');
const setExp   = arr=> localStorage.setItem(KEY_EXP, JSON.stringify(arr));
const getBud   = _=> parseFloat(localStorage.getItem(KEY_BUD)||0);
const setBud   = n => localStorage.setItem(KEY_BUD, n.toFixed(2));

/* ======= Elements ======= */
const budgetIn = document.getElementById('budget'),
      saveBud  = document.getElementById('saveBudget'),
      itemIn   = document.getElementById('item'),
      costIn   = document.getElementById('cost'),
      addBtn   = document.getElementById('add'),
      logTbl   = document.getElementById('log'),
      tbody    = logTbl.querySelector('tbody'),
      summary  = document.getElementById('summary'),
      resetBtn = document.getElementById('resetAll');

/* ======= Render ======= */
function render(){
  // Fill budget input
  const budget = getBud(); budgetIn.value = budget || '';
  // Build rows
  const exp = getExp();
  tbody.innerHTML = ''; let total = 0;
  exp.forEach((e,i)=>{
    total += e.cost;
    const row = tbody.insertRow();
    row.innerHTML = `<td>${e.item}</td>
                     <td class="amount">$${e.cost.toFixed(2)}</td>
                     <td><button data-i="${i}" class="danger" style="padding:.2rem .6rem">×</button></td>`;
  });
  logTbl.hidden = !exp.length;
  const diff = budget - total;
  summary.innerHTML = `<strong>Total:</strong> $${total.toFixed(2)} |
                       <strong>Budget:</strong> $${budget.toFixed(2)} |
                       <strong>${diff>=0?'Under':'Over'}:</strong> $${Math.abs(diff).toFixed(2)}`;
}

/* ======= Events ======= */
saveBud.onclick = () =>{
  const val = parseFloat(budgetIn.value);
  if(isNaN(val)||val<0) return alert('Enter a valid budget amount.');
  setBud(val); render();
};

addBtn.onclick = () =>{
  const item = itemIn.value.trim(),
        cost = parseFloat(costIn.value);
  if(!item) return alert('Describe the purchase.');
  if(isNaN(cost)||cost<=0) return alert('Enter a valid cost.');
  const exp = getExp(); exp.push({item, cost});
  setExp(exp); itemIn.value = costIn.value = ''; itemIn.focus(); render();
};

tbody.onclick = e=>{
  if(e.target.tagName==='BUTTON'){
    const i = +e.target.dataset.i, exp = getExp();
    exp.splice(i,1); setExp(exp); render();
  }
};

resetBtn.onclick = ()=>{
  if(confirm('Delete ALL expenses and budget?')){
    localStorage.removeItem(KEY_EXP); localStorage.removeItem(KEY_BUD); render();
  }
};

/* ======= Kick-off ======= */
render();
</script>
</body>
</html>
